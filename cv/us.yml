region: us
population: &fpop data/usa/population.csv
basegraph: &fgraph data/usa/state_graph.pt
validation:
  days: &vdays 21
  output: validation.csv
forecast:
  output: forecast.csv
prediction_interval_:
  nsamples: 10
  output_mean: mean.csv
  output_std: std.csv
backfill:
  # LANL
  - 2020-03-15
  - 2020-04-15
  - 2020-05-15
  - 2020-05-30
  # - 2020-03-25
  #- 2020-04-05
  #- 2020-04-08
  # - 2020-04-15
  # - 2020-04-25
  # - 2020-04-15
  # - 2020-04-19
  # - 2020-04-22
  # - 2020-04-26
  # - 2020-04-29
  # - 2020-05-03
  # - 2020-05-06
  # - 2020-05-10
  # - 2020-05-17
  # IHME
  # - 2020-05-01
  # GLEAM
  #- 2020-04-13
  #- 2020-04-20
  #- 2020-04-27
  #- 2020-05-04
  # MIT
  #- 2020-04-22
  #- 2020-04-27
  #- 2020-04-30
  #- 2020-05-04
metasir:
  data: data/usa/data_cases.csv
  output: metasir_model.bin
  train:
    fpop: *fpop
    decay: exp
    lr: 0.005
    weight_decay: 0
    niters: 10000
    method: euler
    loss: nb
    t0: 10
    fit_on: -10
    test_on: *vdays
    adjoint: false
ar:
  output: ar_model.bin
  data: data/usa/data_deaths.csv
  resources:
    gpus: 1
    cpus: 1
    memgb: 15
    timeout: 30
  #preprocess:
  #  smooth: 5
  train:
    fpop: *fpop
    # features: data/usa/county_features.pt
    # time_features: data/usa/mobility_features.pt
    #time_features: [[data/usa/mobility_features.pt,
    #data/usa/symptom_features.pt, data/usa/policy_features.pt]]
    # graph: *fgraph
    #decay: [latent2_1]
    activation: sigmoid
    no_cross_correlation: false
    decay: [latent2_1]
    window: [10, 15, 20, 25]
    lr: [0.001]
    momentum: [0.99]
    weight_decay: [0.1, 0.2]
    # weight_decay: [0.1, 0.2, 0.3, 0.4, 0.5]
    # weight_decay: [0.01]
    niters: [20000]
    temp_smoothing: 0
    #temp_smoothing: [5, 25, 50, 75]
    loss: nb
    t0: 10
    test_on: *vdays
sir:
  module: sir
  output: sir_model.npy
  data: data/usa/data_cases.csv
  train:
    fpop: *fpop
    window: 10
    recovery_days: 10
    distancing_reduction: 0.9
    days: *vdays
    # number of days to keep for forecast
    keep: *vdays
gar:
  output: var_model.bin
  data: data/usa/data_deaths.csv
  resources:
    gpus: 1
    cpus: 1
    memgb: 15
    timeout: 30
  train:
    fpop: *fpop
    # features: data/usa/county_features.pt
    # time_features: data/usa/policy_features.pt
    # graph: *fgraph
    dim: 64
    # decay: [latent2_1, latent4_1, latent8_1, latent16_1]
    decay: [latent2_1]
    layers: [5, 10]
    window: [2, 5, 10]
    lr: [0.001]
    momentum: [0.9]
    weight_decay: [0.1]
    niters: [20000]
    loss: nb
    t0: 10
    test_on: *vdays
dar:
  output: var_model.bin
  data: data/usa/data_deaths.csv
  resources:
    gpus: 1
    cpus: 1
    memgb: 15
    timeout: 30
  train:
    fpop: *fpop
    # features: data/usa/county_features.pt
    # time_features: data/usa/policy_features.pt
    # graph: *fgraph
    dim: 64
    # decay: [latent2_1, latent4_1, latent8_1, latent16_1]
    decay: [latent16_1]
    window: [10, 15, 20]
    lr: [0.001]
    momentum: [0.9]
    weight_decay: [0.1]
    niters: [20000]
    loss: nb
    t0: 10
    test_on: *vdays
matrix:
  output: mc_model.bin
  fpop: *fpop
  data: data/usa/data.csv
  resources:
    gpus: 1
    cpus: 1
    memgb: 15
    timeout: 30
  train:
    decay: exp
    epochs: 40000
    bs: 100000 # 10000
    eps: [0.00001]
    lr: [0.0005]
    momentum: [0.99]
    weight_decay: [0.95]
    fit_on: [14]
    k_avg: [10]
    n_embedding: [250]
    seed: [1]
    t0: [0] #, 10] ######
    test_on: *vdays
car:
  output: car_model.bin
  data: data/usa/data_deaths.csv
  resources:
    gpus: 1
    cpus: 1
    memgb: 15
    timeout: 30
  #preprocess:
  #  smooth: 5
  train:
    fpop: *fpop
    # features: data/usa/county_features.pt
    # time_features: data/usa/mobility_features.pt
    # graph: *fgrap
    blocks: [2, 3]
    kernel_size: 2
    layers: [6, 7, 8, 9, 10]
    lr: [0.001]
    momentum: [0.9]
    weight_decay: [0.1, 0.2, 0.3]
    niters: [20000, 30000]
    loss: nb
    t0: 10
    test_on: *vdays
naive:
  module: naive
  output: naive_model.npy
  data: data/usa/data_cases.csv
  train:
    days: *vdays
